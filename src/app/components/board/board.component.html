@if (selectedBoard !== null && listAtMousePosition !== null) {
  <div class="overflow-x-auto overflow-y-hidden board inline-flex mt-14" #board [id]="selectedBoard.id">
    @for (list of selectedBoard.lists; track list.id; let i = $index) {
      @if (i === listDraggingService.draggedListNewIndex && listDraggingService.shouldInsert) {
        <div class="width-230px relative h-min-content mt-2">
          <app-list [list]="listDraggingService.draggedListData"
                    [hidden]="true"
          ></app-list>
        </div>
      }
      <div class="width-230px relative h-min-content mt-2">
        <app-list (closeListAction)="removeList(i)"
                  [list]="list"
                  [hidden]="i === listDraggingService.draggedListIndex && !listDraggingService.shouldInsert"
                  [initListener]="true"
                  [selectedBoard]="selectedBoard"
                  [listAtMousePosition]="listAtMousePosition.nativeElement"
        ></app-list>
      </div>
    }
    <div class="add-list-container">
      <ng-container *ngIf="!isAddingList; else titleInput">
        <button (click)="isAddingList = !isAddingList"
                class="border-none bg-gray-100 my-2 mx-1.5 py-1.5 px-3 rounded w-max"
        >+ Add another list</button>
      </ng-container>
      <ng-template #titleInput>
        <app-input-form
          (textSubmissionAction)="isAddingList = !isAddingList;
        pushToArray($event.text.length > 0 && $event.text !== '\n' ? $event.text : 'New List');
        isAddingList = $event.keep"
        ></app-input-form>
      </ng-template>
    </div>
  </div>
  <div #FakeTask
       *ngIf="isDraggingTask"
       class="task flex justify-between rounded break-words bg-blue-100 h-auto p-1">
    <div class="pl-2.5">{{selectedTaskData.content}}</div>
  </div>
} @else {
  <div class="pt-14 w-full h-screen flex justify-center items-center">
    ...Loading
  </div>
}

<div #ListAtMousePosition class="width-230px fixed">
  <div id="list-at-mouse-position" class="width-230px relative">
    @if (listDraggingService.draggedListVisual !== null) {
      <app-list [list]="listDraggingService.draggedListVisual"></app-list>
    }
  </div>
</div>


