@if (selectedBoard && listAtMousePosition?.nativeElement && taskAtMousePosition?.nativeElement) {
  <div class="overflow-x-auto overflow-y-hidden board inline-flex mt-14" #board [id]="selectedBoard.id">
    @for (list of selectedBoard.lists; track list.id; let i = $index) {
      @if (i === listDraggingService.targetListIndex && listDraggingService.shouldInsert) {
        <div class="width-230px relative h-min-content mt-2">
          <app-list-placeholder [list]="listDraggingService.sourceListData" [hidden]="true"></app-list-placeholder>
        </div>
      }
      <div class="width-230px relative h-min-content mt-2">
        <app-list (removeListAction)="removeList(i)"
                  [list]="list"
                  [initListener]="true"
                  [selectedBoard]="selectedBoard"
                  [listAtMousePosition]="listAtMousePosition.nativeElement"
        >
          @for (task of list.tasks; track task.id; let j = $index) {
            @if (i === taskDraggingService.targetListIndex && j === taskDraggingService.targetTaskIndex && taskDraggingService.shouldInsert) {
              <app-task-placeholder [task]="taskDraggingService.sourceTaskData" [hidden]="true"></app-task-placeholder>
            }
            <app-task
              [task]="task"
              [list]="list"
              [selectedBoard]="selectedBoard"
              [taskAtMousePosition]="taskAtMousePosition.nativeElement"
              [initListener]="true"
              (removeAction)="removeTask(i, j)"
            ></app-task>
            @if (i === taskDraggingService.targetListIndex && taskDraggingService.targetTaskIndex > j && listDraggingService.shouldInsert) {
              <app-task-placeholder [task]="taskDraggingService.sourceTaskData" [hidden]="true"></app-task-placeholder>
            }
          }
        </app-list>
      </div>
      @if (i === selectedBoard.lists.length - 1 && listDraggingService.targetListIndex > i && listDraggingService.shouldInsert) {
        <div class="width-230px relative h-min-content mt-2">
          <app-list-placeholder [list]="listDraggingService.sourceListData"
                                [hidden]="true"
          ></app-list-placeholder>
        </div>
      }
    }
    <div class="width-230px bg-gray-100 rounded-xl relative h-min-content mt-2">
      <div class="flex justify-between px-5 py-2.5">
        @if (!isAddingList) {
          <button (click)="isAddingList = !isAddingList"
                  class="border-none w-max"
          >+ Add another list</button>
        } @else {
          <app-add-list
            (textSubmissionAction)="onTextSubmissionAction($event)"
          ></app-add-list>
        }
      </div>
    </div>
  </div>
  <div #FakeTask
       *ngIf="isDraggingTask"
       class="task flex justify-between rounded break-words bg-blue-100 h-auto p-1">
    <div class="pl-2.5">{{selectedTaskData.content}}</div>
  </div>
} @else {
  <div class="pt-14 w-full h-screen flex justify-center items-center">
    ...Loading
  </div>
}

<div #ListAtMousePosition class="width-230px fixed">
  <div id="list-at-mouse-position" class="width-230px relative">
    @if (listDraggingService.sourceListPlaceholderData !== null) {
      <app-list-placeholder [list]="listDraggingService.sourceListPlaceholderData"></app-list-placeholder>
    }
  </div>
</div>

<div #TaskAtMousePosition class="width-230px fixed">
  <div id="task-at-mouse-position" class="width-230px relative">
    @if (taskDraggingService.sourceTaskPlaceholderData !== null) {
      <app-task-placeholder [task]="taskDraggingService.sourceTaskPlaceholderData"></app-task-placeholder>
    }
  </div>
</div>


