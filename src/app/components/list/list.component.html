<div class="list-header">
  <ng-container *ngIf="!isChangingName; else titleInput">
    <div #titleRef class="list-title">{{list.title}}</div>
  </ng-container>
  <ng-template #titleInput>
    <app-input-form
      (textSubmissionAction)="isChangingName = !isChangingName; list.title = $event.text.length > 0 ? $event.text : list.title"
      [textToShow]="list.title"
      [targetClass]="'list-title'"
    ></app-input-form>
  </ng-template>
  <button (click)="closeListAction.emit()" class="remove-list">&times;</button>
</div>

<div class="list">
  <ngx-simplebar [options]="options">
      <app-task
        *ngFor="let task of list.tasks; index as i"
        [task]="task"
        (removeAction)="list.tasks.splice(i, 1)"
      ></app-task>
  </ngx-simplebar>
</div>

<div class="list-footer">
  <ng-container *ngIf="!isAddingTask; else taskInput">
    <button (click)="isAddingTask = !isAddingTask" class="open-form-to-add-task">+ Add another task</button>
  </ng-container>
  <ng-template #taskInput>
    <app-input-form
      (textSubmissionAction)="pushToArray($event.text.length > 0 && $event.text !== '\n' ? $event.text : 'New Task');
      isAddingTask = $event.keep"
      [textToShow]="''"
      [targetClass]="'open-form-to-add-task'"
    ></app-input-form>
  </ng-template>
</div>
